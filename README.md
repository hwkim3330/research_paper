# ğŸš— ì°¨ëŸ‰ìš© ì´ë”ë„· TSN Credit-Based Shaper êµ¬í˜„ ë° ì„±ëŠ¥ ê²€ì¦

[![IEEE 802.1Qav](https://img.shields.io/badge/IEEE-802.1Qav-blue)](https://standards.ieee.org/standard/802_1Qav-2009.html)
[![Microchip LAN9692](https://img.shields.io/badge/Platform-LAN9692-green)](https://www.microchip.com)
[![TSN](https://img.shields.io/badge/TSN-Time--Sensitive%20Networking-orange)](https://1.ieee802.org/tsn/)
[![Research Paper](https://img.shields.io/badge/Paper-LaTeX-red)](paper_complete.tex)

## ğŸ“‹ Executive Summary

ë³¸ ì—°êµ¬ëŠ” ì°¨ì„¸ëŒ€ ìë™ì°¨ ë„¤íŠ¸ì›Œí¬ ì•„í‚¤í…ì²˜ì—ì„œ í•µì‹¬ ê¸°ìˆ ë¡œ ë¶€ìƒí•œ **IEEE 802.1Qav Credit-Based Shaper (CBS)** ë©”ì»¤ë‹ˆì¦˜ì„ ì‹¤ì œ í•˜ë“œì›¨ì–´ í™˜ê²½ì—ì„œ êµ¬í˜„í•˜ê³  ê²€ì¦í•œ ì‹¤ì¦ì  ì—°êµ¬ì…ë‹ˆë‹¤.

### ğŸ¯ í•µì‹¬ ì„±ê³¼

<table>
<tr>
<td width="50%">

#### ğŸ“Š ì„±ëŠ¥ ê°œì„  ì§€í‘œ
- **í”„ë ˆì„ ì†ì‹¤ë¥ **: 21.5% â†’ 0.67% **(96.9% â¬‡ï¸)**
- **í‰ê·  ì§€í„°**: 42.3ms â†’ 3.1ms **(92.7% â¬‡ï¸)**
- **í‰ê·  ì§€ì—°**: 68.4ms â†’ 8.3ms **(87.9% â¬‡ï¸)**
- **ëŒ€ì—­í­ ë³´ì¥**: 55% â†’ 98% **(78% â¬†ï¸)**

</td>
<td width="50%">

#### ğŸ† ì£¼ìš” ê¸°ì—¬
- âœ… Microchip LAN9692 ê¸°ë°˜ CBS êµ¬í˜„
- âœ… ì‹¤ì œ ì˜ìƒ ìŠ¤íŠ¸ë¦¼ ê¸°ë°˜ ê²€ì¦
- âœ… íŒŒë¼ë¯¸í„° ìµœì í™” ê°€ì´ë“œë¼ì¸
- âœ… ì¡´ ì•„í‚¤í…ì²˜ ì ìš© ë°©ë²•ë¡ 

</td>
</tr>
</table>

---

## ğŸ“– Table of Contents

1. [ì—°êµ¬ ë°°ê²½](#-ì—°êµ¬-ë°°ê²½)
2. [ì‹œìŠ¤í…œ ì•„í‚¤í…ì²˜](#-ì‹œìŠ¤í…œ-ì•„í‚¤í…ì²˜)
3. [CBS ì´ë¡  ë° êµ¬í˜„](#-cbs-ì´ë¡ -ë°-êµ¬í˜„)
4. [ì‹¤í—˜ í™˜ê²½](#-ì‹¤í—˜-í™˜ê²½)
5. [ì‹¤í—˜ ê²°ê³¼](#-ì‹¤í—˜-ê²°ê³¼)
6. [ì„±ëŠ¥ ë¶„ì„](#-ì„±ëŠ¥-ë¶„ì„)
7. [êµ¬í˜„ ê°€ì´ë“œ](#-êµ¬í˜„-ê°€ì´ë“œ)
8. [í”„ë¡œì íŠ¸ êµ¬ì¡°](#-í”„ë¡œì íŠ¸-êµ¬ì¡°)
9. [í–¥í›„ ì—°êµ¬](#-í–¥í›„-ì—°êµ¬)

---

## ğŸŒŸ ì—°êµ¬ ë°°ê²½

### ì°¨ëŸ‰ E/E ì•„í‚¤í…ì²˜ì˜ ì§„í™”

```mermaid
graph LR
    A[1ì„¸ëŒ€<br/>ë¶„ì‚°í˜•] --> B[2ì„¸ëŒ€<br/>ë„ë©”ì¸ ê¸°ë°˜]
    B --> C[3ì„¸ëŒ€<br/>ì¡´ ê¸°ë°˜]
    C --> D[4ì„¸ëŒ€<br/>ì¤‘ì•™ì§‘ì¤‘í˜•]
    
    style A fill:#f9f,stroke:#333,stroke-width:2px
    style B fill:#bbf,stroke:#333,stroke-width:2px
    style C fill:#bfb,stroke:#333,stroke-width:4px
    style D fill:#fbb,stroke:#333,stroke-width:2px
```

### ë„¤íŠ¸ì›Œí¬ ìš”êµ¬ì‚¬í•­ ì¦ê°€

| ê¸°ìˆ  | ë°ì´í„° ìƒì„±ëŸ‰ | ì§€ì—° ìš”êµ¬ì‚¬í•­ | ì‹ ë¢°ì„± |
|------|--------------|--------------|--------|
| **ììœ¨ì£¼í–‰ ì„¼ì„œ** | ~4 GB/s | < 10ms | 99.999% |
| **ì¸í¬í…Œì¸ë¨¼íŠ¸** | ~100 MB/s | < 100ms | 99.9% |
| **ì œì–´ ì‹ í˜¸** | ~1 MB/s | < 1ms | 99.9999% |
| **ì§„ë‹¨/OTA** | ~10 MB/s | Best Effort | 99% |

### TSNì˜ í•„ìš”ì„±

ê¸°ì¡´ CAN/FlexRayì˜ í•œê³„:
- âŒ **ëŒ€ì—­í­ ë¶€ì¡±**: CAN 1Mbps, FlexRay 10Mbps
- âŒ **í™•ì¥ì„± ì œí•œ**: ê³ ì •ëœ íƒ€ì„ìŠ¬ë¡¯
- âŒ **ë†’ì€ ë¹„ìš©**: ì „ìš© í•˜ë“œì›¨ì–´ í•„ìš”

TSN ì´ë”ë„·ì˜ ì¥ì :
- âœ… **ê³ ëŒ€ì—­í­**: 1Gbps ~ 10Gbps
- âœ… **ìœ ì—°ì„±**: ë™ì  ëŒ€ì—­í­ í• ë‹¹
- âœ… **í‘œì¤€í™”**: IEEE 802.1 í‘œì¤€
- âœ… **ë¹„ìš© íš¨ìœ¨**: ë²”ìš© ì´ë”ë„· ê¸°ìˆ 

---

## ğŸ—ï¸ ì‹œìŠ¤í…œ ì•„í‚¤í…ì²˜

### í•˜ë“œì›¨ì–´ í”Œë«í¼

<table>
<tr>
<td width="60%">

#### Microchip LAN9692 TSN Switch SoC

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚          LAN9692 Architecture        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚   ARM Cortex-A53 @ 1GHz     â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚   TSN Hardware Accelerator   â”‚    â”‚
â”‚  â”‚   - CBS Engine              â”‚    â”‚
â”‚  â”‚   - TAS Scheduler            â”‚    â”‚
â”‚  â”‚   - IEEE 1588 Timestamping  â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚   4-Port Gigabit Switch     â”‚    â”‚
â”‚  â”‚   8 Queues per Port         â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

</td>
<td width="40%">

#### ì£¼ìš” ì‚¬ì–‘

| í•­ëª© | ì‚¬ì–‘ |
|------|------|
| **CPU** | ARM Cortex-A53 64-bit |
| **Clock** | 1 GHz |
| **Memory** | 2MiB ECC SRAM |
| **Ports** | 4Ã— GbE (SFP+) |
| **Queues** | 8 per port |
| **TSN** | CBS, TAS, PSFP |
| **PTP** | HW Timestamping |
| **Cert** | AEC-Q100 Grade 2 |

</td>
</tr>
</table>

### ì†Œí”„íŠ¸ì›¨ì–´ ìŠ¤íƒ

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         Application Layer             â”‚
â”‚    (Test Scripts, Monitoring)         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚         YANG Data Models              â”‚
â”‚  â€¢ ieee802-dot1q-bridge              â”‚
â”‚  â€¢ ieee802-dot1q-sched               â”‚
â”‚  â€¢ ieee802-dot1q-cbs                 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚      VelocityDRIVE-SP RTOS           â”‚
â”‚    (TSN Protocol Stack)               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚    Hardware Abstraction Layer         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â†• UART/CoAP Interface
```

### ë„¤íŠ¸ì›Œí¬ í† í´ë¡œì§€

```
    [Video Source PC1]              [Receiver PC2]
           â”‚                              â”‚
      Port 8 â†“                       Port 10 â†‘
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚                                          â”‚
    â”‚          LAN9692 TSN Switch              â”‚
    â”‚                                          â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
      Port 9 â†“                       Port 11 â†‘
           â”‚                              â”‚
    [BE Traffic PC4]               [Receiver PC3]
    
    â”â”â” Video Stream (Priority 6-7)
    â”…â”…â”… BE Traffic (Priority 0)
```

---

## ğŸ“ CBS ì´ë¡  ë° êµ¬í˜„

### Credit-Based Shaper ë™ì‘ ì›ë¦¬

CBSëŠ” ê° íŠ¸ë˜í”½ í´ë˜ìŠ¤ì— ëŒ€í•´ 'í¬ë ˆë”§(credit)' í† í°ì„ ê´€ë¦¬í•˜ì—¬ ì „ì†¡ì„ ì œì–´í•©ë‹ˆë‹¤.

#### í•µì‹¬ íŒŒë¼ë¯¸í„°

| íŒŒë¼ë¯¸í„° | ì„¤ëª… | ê³„ì‚°ì‹ |
|---------|------|--------|
| **idleSlope** | í¬ë ˆë”§ ì¦ê°€ìœ¨ | `StreamRate Ã— (1 + Margin)` |
| **sendSlope** | í¬ë ˆë”§ ê°ì†Œìœ¨ | `idleSlope - PortRate` |
| **hiCredit** | í¬ë ˆë”§ ìƒí•œ | `(idleSlope Ã— MaxFrameSize) / PortRate` |
| **loCredit** | í¬ë ˆë”§ í•˜í•œ | `-hiCredit` |

#### í¬ë ˆë”§ ë™ì—­í•™

```python
def credit_dynamics(t, queue_state):
    if queue_state == "IDLE" and credit < hiCredit:
        credit += idleSlope * dt  # í¬ë ˆë”§ ì¦ê°€
    elif queue_state == "TRANSMITTING":
        credit += sendSlope * dt  # í¬ë ˆë”§ ê°ì†Œ (sendSlope < 0)
    
    can_transmit = (credit >= 0) and frame_ready
```

### ëŒ€ì—­í­ ë³´ì¥ ë©”ì»¤ë‹ˆì¦˜

```
ì‹œê°„ â†’
Credit â†‘
        â”‚     â•±â•²      â•±â•²      â•±â•²
hiCreditâ”œâ”€â”€â”€â”€â•±â”€â”€â•²â”€â”€â”€â”€â•±â”€â”€â•²â”€â”€â”€â”€â•±â”€â”€â•²â”€â”€â”€â”€
        â”‚   â•±    â•²  â•±    â•²  â•±    â•²
        â”‚  â•±      â•²â•±      â•²â•±      â•²
       0â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
        â”‚         Transmit Enable
loCreditâ”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
        â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
          IDLE  TX  IDLE  TX  IDLE  TX
```

### êµ¬í˜„ ì„¤ì • (YAML)

```yaml
# CBS Configuration for Video Stream
- ? "/ietf-interfaces:interfaces/interface[name='11']/
     ieee802-dot1q-bridge:bridge-port/
     ieee802-dot1q-sched:traffic-class-table[traffic-class='7']"
  : 
    transmission-selection-algorithm:
      credit-based-shaper:
        idle-slope: 20000000    # 20 Mbps
        send-slope: -980000000  # -980 Mbps  
        hi-credit: 243
        lo-credit: -243
```

---

## ğŸ§ª ì‹¤í—˜ í™˜ê²½

### ì‹¤í—˜ ì‹œë‚˜ë¦¬ì˜¤

<table>
<tr>
<th width="50%">ì‹œë‚˜ë¦¬ì˜¤ 1: CBS ë¹„í™œì„±í™” (Baseline)</th>
<th width="50%">ì‹œë‚˜ë¦¬ì˜¤ 2: CBS í™œì„±í™”</th>
</tr>
<tr>
<td>

```
ëª¨ë“  íŠ¸ë˜í”½ FIFO ì²˜ë¦¬
â”œâ”€â”€ Video Stream 1 (15 Mbps)
â”œâ”€â”€ Video Stream 2 (15 Mbps)
â””â”€â”€ BE Traffic (0-800 Mbps)
    
ê²°ê³¼ ì˜ˆìƒ:
â€¢ ë†’ì€ í”„ë ˆì„ ì†ì‹¤
â€¢ ë¶ˆê·œì¹™í•œ ì§€í„°
â€¢ ì˜ìƒ í’ˆì§ˆ ì €í•˜
```

</td>
<td>

```
ìš°ì„ ìˆœìœ„ ê¸°ë°˜ ì²˜ë¦¬
â”œâ”€â”€ TC7: Video 1 (idleSlope=20M)
â”œâ”€â”€ TC6: Video 2 (idleSlope=20M)
â””â”€â”€ TC0: BE Traffic (ë‚˜ë¨¸ì§€)
    
ê²°ê³¼ ì˜ˆìƒ:
â€¢ ë‚®ì€ í”„ë ˆì„ ì†ì‹¤
â€¢ ì¼ì •í•œ ì§€í„°
â€¢ ì•ˆì •ì  ì˜ìƒ ì¬ìƒ
```

</td>
</tr>
</table>

### íŠ¸ë˜í”½ ìƒì„±

#### ì˜ìƒ ìŠ¤íŠ¸ë¦¼ (H.264/MPEG-TS)
```bash
cvlc --loop video.mp4 \
  --sout "#transcode{vcodec=h264,vb=15000}:duplicate{
    dst=std{access=udp{ttl=16,mtu=1400},mux=ts,dst=10.0.100.2:5005},
    dst=std{access=udp{ttl=16,mtu=1400},mux=ts,dst=10.0.100.3:5005}
  }"
```

#### BE íŠ¸ë˜í”½ (iperf3)
```bash
iperf3 -c 10.0.100.2 -u -b 800M -t 60 -i 1
```

### ì¸¡ì • ë„êµ¬

| ê³„ì¸µ | ì¸¡ì • í•­ëª© | ë„êµ¬ |
|------|----------|------|
| **ë„¤íŠ¸ì›Œí¬** | ì²˜ë¦¬ëŸ‰, íŒ¨í‚· ì†ì‹¤ | tcpdump, Wireshark |
| **ì „ì†¡** | ì§€í„°, ì§€ì—° | RTP ë¶„ì„, PTP |
| **ì• í”Œë¦¬ì¼€ì´ì…˜** | í”„ë ˆì„ ì†ì‹¤, ë²„í¼ë§ | VLC í†µê³„ |
| **í’ˆì§ˆ** | PSNR, SSIM, MOS | FFmpeg, ì£¼ê´€í‰ê°€ |

---

## ğŸ“Š ì‹¤í—˜ ê²°ê³¼

### 1. ì²˜ë¦¬ëŸ‰ ë¹„êµ

#### BE íŠ¸ë˜í”½ ë¶€í•˜ì— ë”°ë¥¸ ì˜ìƒ ìŠ¤íŠ¸ë¦¼ ì²˜ë¦¬ëŸ‰

```
Throughput (Mbps)
16 â”¤                                 CBS ON
15 â”¤â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
14 â”¤                                      
12 â”¤           CBS OFF                    
10 â”¤       â•±â•²                             
 8 â”¤     â•±    â•²___________                
 6 â”¤   â•±                                  
 4 â”¤ â•±                                    
 2 â”¤                                      
 0 â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”¬â”€â”€â”€â”€
     0   100  200  400  600  800 (BE Load Mbps)
```

| BE Load | CBS OFF |  | CBS ON |  |
|---------|---------|--|--------|--|
| (Mbps) | Stream1 | Stream2 | Stream1 | Stream2 |
| 0 | 15.0 | 15.0 | 15.0 | 15.0 |
| 100 | 14.8 | 14.9 | 15.0 | 15.0 |
| 200 | 14.2 | 14.3 | 14.9 | 15.0 |
| 400 | 12.1 | 11.8 | 14.9 | 14.9 |
| 600 | 9.3 | 8.9 | 14.8 | 14.9 |
| **800** | **8.3** | **7.9** | **14.8** | **14.7** |

### 2. í”„ë ˆì„ ì†ì‹¤ë¥ 

#### ì‹œê°„ì— ë”°ë¥¸ í”„ë ˆì„ ì†ì‹¤ íŒ¨í„´

```
Frame Loss (%)
25 â”¤     CBS OFF
20 â”¤   â•±â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
15 â”¤ â•±â•±                  
10 â”¤â•±                    
 5 â”¤                     
 0 â”¤â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â” CBS ON
   â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”¬â”€â”€â”€â”€
        15   30   45   60 (seconds)
```

| ì¸¡ì • í•­ëª© | CBS OFF | CBS ON | ê°œì„ ìœ¨ |
|----------|---------|--------|--------|
| **ì´ í”„ë ˆì„** | 1,800 | 1,800 | - |
| **ì†ì‹¤ í”„ë ˆì„** | 387 | 12 | 96.9% â¬‡ï¸ |
| **ì†ì‹¤ë¥ ** | 21.5% | 0.67% | 96.9% â¬‡ï¸ |
| **ìµœëŒ€ ì—°ì† ì†ì‹¤** | 23 | 2 | 91.3% â¬‡ï¸ |

### 3. ì§€í„° ë¶„ì„

#### ì§€í„° ë¶„í¬ íˆìŠ¤í† ê·¸ë¨

```
Probability
0.4 â”¤    CBS ON
0.3 â”¤     â”‚
0.2 â”¤     â”‚
0.1 â”¤  â•±â”€â”€â”´â”€â”€â•²      CBS OFF
0.0 â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•±â”€â”€â”€â”€â”€â”€â”€â”€â•²â”€â”€â”€â”€â”€â”€
    0    10    20    40    60  (Jitter ms)
         Î¼=3.1ms    Î¼=42.3ms
```

| ì§€í„° ë©”íŠ¸ë¦­ | CBS OFF | CBS ON | ê°œì„ ìœ¨ |
|------------|---------|--------|--------|
| **í‰ê·  (ms)** | 42.3 | 3.1 | 92.7% â¬‡ï¸ |
| **í‘œì¤€í¸ì°¨ (ms)** | 15.2 | 1.2 | 92.1% â¬‡ï¸ |
| **ìµœëŒ€ (ms)** | 143.5 | 8.5 | 94.1% â¬‡ï¸ |
| **99-percentile** | 98.7 | 6.3 | 93.6% â¬‡ï¸ |

### 4. ì§€ì—° íŠ¹ì„±

```
Latency (ms)
200 â”¤     CBS OFF
150 â”¤   â•±â•²    â•±â•²
100 â”¤ â•±    â•²â•±    â•²
 50 â”¤              â•²___
  0 â”¤â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â” CBS ON (8.3ms avg)
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
```

| ì§€ì—° ë©”íŠ¸ë¦­ | CBS OFF | CBS ON | ê°œì„ ìœ¨ |
|------------|---------|--------|--------|
| **í‰ê·  (ms)** | 68.4 | 8.3 | 87.9% â¬‡ï¸ |
| **ìµœëŒ€ (ms)** | 185.2 | 12.5 | 93.2% â¬‡ï¸ |
| **ìµœì†Œ (ms)** | 23.1 | 5.2 | 77.5% â¬‡ï¸ |

### 5. ì˜ìƒ í’ˆì§ˆ í‰ê°€

#### ê°ê´€ì  í’ˆì§ˆ ì§€í‘œ

| í’ˆì§ˆ ì§€í‘œ | CBS OFF | CBS ON | ê°œì„  |
|----------|---------|--------|------|
| **PSNR (dB)** | 28.3 | 42.1 | +13.8 dB |
| **SSIM** | 0.72 | 0.96 | +33.3% |
| **VQM** | 4.2 | 1.3 | -69.0% |
| **ë²„í¼ë§ ì´ë²¤íŠ¸** | 23 | 0 | -100% |

#### ì£¼ê´€ì  í’ˆì§ˆ í‰ê°€ (MOS, 1-5 ì²™ë„)

```
       CBS OFF  CBS ON
       â”Œâ”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”
   5.0 â”‚     â”‚  â”‚ â–ˆâ–ˆâ–ˆ â”‚ 4.8
   4.0 â”‚     â”‚  â”‚ â–ˆâ–ˆâ–ˆ â”‚
   3.0 â”‚     â”‚  â”‚ â–ˆâ–ˆâ–ˆ â”‚
   2.0 â”‚ â–ˆâ–ˆâ–ˆ â”‚  â”‚ â–ˆâ–ˆâ–ˆ â”‚
   1.0 â”‚ â–ˆâ–ˆâ–ˆ â”‚  â”‚     â”‚
   0.0 â””â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”˜
       MOS=2.0  MOS=4.8
```

---

## ğŸ“ˆ ì„±ëŠ¥ ë¶„ì„

### ëŒ€ì—­í­ í™œìš© íŒ¨í„´

#### CBS í™œì„±í™” ì‹œ ì‹œê°„ë³„ ëŒ€ì—­í­ í™œìš©

```
Bandwidth (Mbps)
1000 â”¤ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
 800 â”¤ â”‚â–‘â–‘â–‘â–‘â–‘â–‘â–‘ BE Traffic â–‘â–‘â–‘â–‘â–‘â–‘â”‚
 600 â”¤ â”‚â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â”‚
 400 â”¤ â”‚â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â”‚
 200 â”¤ â”‚â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â”‚
  30 â”¤ â”‚â–“â–“â–“â–“ Video Stream 2 â–“â–“â–“â–“â–“â”‚
  15 â”¤ â”‚â–ˆâ–ˆâ–ˆâ–ˆ Video Stream 1 â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ”‚
   0 â””â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€
     0                          60 (seconds)
```

### íš¨ìœ¨ì„± ë¶„ì„

| íŠ¸ë˜í”½ í´ë˜ìŠ¤ | í• ë‹¹ ëŒ€ì—­í­ | ì‹¤ì œ ì‚¬ìš© | íš¨ìœ¨ |
|--------------|------------|----------|------|
| **Video TC7** | 20 Mbps | 14.8 Mbps | 74.0% |
| **Video TC6** | 20 Mbps | 14.7 Mbps | 73.5% |
| **BE TC0** | 960 Mbps | 750.5 Mbps | 78.2% |
| **Total** | 1000 Mbps | 780.0 Mbps | 78.0% |

### í•µì‹¬ ì„±ê³¼ ìš”ì•½

<table>
<tr>
<td width="33%">

#### ğŸ¯ ëŒ€ì—­í­ ë³´ì¥
```
   CBS OFF    CBS ON
   â”Œâ”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”
   â”‚ 55% â”‚   â”‚ 98% â”‚
   â””â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”˜
    â†‘ 78% ê°œì„ 
```

</td>
<td width="33%">

#### ğŸ“‰ ì†ì‹¤ë¥  ê°ì†Œ
```
   CBS OFF    CBS ON
   â”Œâ”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”
   â”‚21.5%â”‚   â”‚0.67%â”‚
   â””â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”˜
    â†‘ 96.9% ê°œì„ 
```

</td>
<td width="33%">

#### â±ï¸ ì§€í„° ê°œì„ 
```
   CBS OFF    CBS ON  
   â”Œâ”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”
   â”‚42.3 â”‚   â”‚ 3.1 â”‚
   â”‚ ms  â”‚   â”‚ ms  â”‚
   â””â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”˜
    â†‘ 92.7% ê°œì„ 
```

</td>
</tr>
</table>

---

## ğŸ› ï¸ êµ¬í˜„ ê°€ì´ë“œ

### 1. í™˜ê²½ ì„¤ì •

#### í•„ìš” í•˜ë“œì›¨ì–´
- Microchip EVB-LAN9692-LM í‰ê°€ ë³´ë“œ
- 4ê°œì˜ Linux PC (Ubuntu 20.04+)
- Gigabit Ethernet ì¼€ì´ë¸”

#### í•„ìš” ì†Œí”„íŠ¸ì›¨ì–´
```bash
# ì†¡ì‹ /ìˆ˜ì‹  PC
sudo apt-get update
sudo apt-get install -y \
  vlc \
  iperf3 \
  tcpdump \
  wireshark \
  ethtool \
  iproute2
```

### 2. VLAN ë° ìš°ì„ ìˆœìœ„ ì„¤ì •

#### ì†¡ì‹  ì¸¡ ì„¤ì •
```bash
#!/bin/bash
# VLAN ì¸í„°í˜ì´ìŠ¤ ìƒì„±
sudo ip link add link eth0 name eth0.100 type vlan id 100
sudo ip addr add 10.0.100.1/24 dev eth0.100
sudo ip link set eth0.100 up

# PCP ë§¤í•‘ ì„¤ì • (skb priority â†’ VLAN PCP)
sudo ip link set dev eth0.100 type vlan \
  egress-qos-map 0:0 1:1 2:2 3:3 4:4 5:5 6:6 7:7

# íŠ¸ë˜í”½ í´ë˜ìŠ¤ í•„í„° ì„¤ì •
sudo tc qdisc add dev eth0.100 clsact
sudo tc filter add dev eth0.100 egress protocol ip u32 \
  match ip dport 5005 0xffff action skbedit priority 7
```

### 3. TSN ìŠ¤ìœ„ì¹˜ CBS ì„¤ì •

#### YAML ì„¤ì • íŒŒì¼ ì‘ì„±
```yaml
# cbs-config.yaml
- ? "/ietf-interfaces:interfaces/interface[name='11']/
     ieee802-dot1q-bridge:bridge-port/
     ieee802-dot1q-sched:traffic-class-table"
  :
    - traffic-class: 7
      transmission-selection-algorithm:
        credit-based-shaper:
          idle-slope: 20000000
          send-slope: -980000000
          hi-credit: 243
          lo-credit: -243
    - traffic-class: 6
      transmission-selection-algorithm:
        credit-based-shaper:
          idle-slope: 20000000
          send-slope: -980000000
          hi-credit: 243
          lo-credit: -243
```

#### ì„¤ì • ì ìš©
```bash
# MUP1 ì±„ë„ì„ í†µí•œ ì„¤ì • ì „ì†¡
sudo dr mup1cc -d /dev/ttyACM0 -m ipatch -i cbs-config.yaml

# ì„¤ì • í™•ì¸
sudo dr mup1cc -d /dev/ttyACM0 -m fetch \
  -p "/ieee802-dot1q-bridge:bridges"
```

### 4. íŠ¸ë˜í”½ ìƒì„± ë° ì¸¡ì •

#### ì˜ìƒ ìŠ¤íŠ¸ë¦¼ ì „ì†¡
```bash
# sender.sh
#!/bin/bash
cvlc --loop /path/to/video.mp4 \
  --sout "#transcode{vcodec=h264,vb=15000,acodec=mp4a,ab=128}:\
  duplicate{
    dst=std{access=udp{ttl=16,mtu=1400},mux=ts,dst=10.0.100.2:5005},
    dst=std{access=udp{ttl=16,mtu=1400},mux=ts,dst=10.0.100.3:5005}
  }" \
  --network-caching=100
```

#### ìë™í™”ëœ ì¸¡ì • ìŠ¤í¬ë¦½íŠ¸
```bash
# measure.sh
#!/bin/bash
for load in 0 100 200 400 600 800; do
  echo "Testing BE load: ${load}Mbps"
  
  # BE íŠ¸ë˜í”½ ìƒì„±
  iperf3 -c 10.0.100.2 -u -b ${load}M -t 60 &
  PID_IPERF=$!
  
  # íŒ¨í‚· ìº¡ì²˜
  sudo tcpdump -i eth0.100 -w capture_${load}.pcap &
  PID_TCPDUMP=$!
  
  # VLC í†µê³„ ìˆ˜ì§‘
  cvlc udp://@:5005 --intf dummy --sout "#stat" \
    > stats_${load}.log 2>&1 &
  PID_VLC=$!
  
  sleep 65
  
  # í”„ë¡œì„¸ìŠ¤ ì¢…ë£Œ
  kill $PID_IPERF $PID_TCPDUMP $PID_VLC
  wait
done
```

### 5. íŒŒë¼ë¯¸í„° íŠœë‹ ê°€ì´ë“œ

#### idleSlope ì„¤ì • ê¶Œì¥ì‚¬í•­

| íŠ¸ë˜í”½ ìœ í˜• | ì‹¤ì œ ë¹„íŠ¸ë ˆì´íŠ¸ | ê¶Œì¥ idleSlope | ì—¬ìœ ìœ¨ |
|------------|---------------|----------------|--------|
| HD Video | 15 Mbps | 20 Mbps | 33% |
| 4K Video | 25 Mbps | 35 Mbps | 40% |
| Audio | 256 kbps | 512 kbps | 100% |
| Control | 1 Mbps | 2 Mbps | 100% |

#### í¬ë ˆë”§ í•œê³„ ê³„ì‚°
```python
def calculate_credit_limits(idle_slope, port_rate, max_frame_size=1518):
    """
    CBS í¬ë ˆë”§ í•œê³„ ê³„ì‚°
    
    Args:
        idle_slope: bps ë‹¨ìœ„ idleSlope
        port_rate: bps ë‹¨ìœ„ í¬íŠ¸ ì†ë„
        max_frame_size: ë°”ì´íŠ¸ ë‹¨ìœ„ ìµœëŒ€ í”„ë ˆì„ í¬ê¸°
    
    Returns:
        (hi_credit, lo_credit) íŠœí”Œ
    """
    hi_credit = (idle_slope * max_frame_size * 8) / port_rate
    lo_credit = -hi_credit
    return (hi_credit, lo_credit)

# ì˜ˆì‹œ: 20Mbps idleSlope, 1Gbps í¬íŠ¸
hi, lo = calculate_credit_limits(20e6, 1e9)
print(f"hiCredit: {hi:.0f}, loCredit: {lo:.0f}")
# ì¶œë ¥: hiCredit: 243, loCredit: -243
```

---

## ğŸ“ í”„ë¡œì íŠ¸ êµ¬ì¡°

```
research_paper/
â”‚
â”œâ”€â”€ ğŸ“„ ë…¼ë¬¸ ë° ë¬¸ì„œ
â”‚   â”œâ”€â”€ paper_complete.tex      # ì™„ì „í•œ LaTeX ë…¼ë¬¸
â”‚   â”œâ”€â”€ README.md               # í”„ë¡œì íŠ¸ ê°œìš” (ì´ íŒŒì¼)
â”‚   â””â”€â”€ í†µì‹ í•™íšŒ_CBSêµ¬í˜„.hwp    # ì›ë³¸ í•œê¸€ ë…¼ë¬¸
â”‚
â”œâ”€â”€ ğŸ”§ ì„¤ì • íŒŒì¼
â”‚   â”œâ”€â”€ ipatch-cbs-idle-slope.yaml    # CBS íŒŒë¼ë¯¸í„° ì„¤ì •
â”‚   â”œâ”€â”€ ipatch-vlan-set.yaml          # VLAN ì„¤ì •
â”‚   â”œâ”€â”€ ipatch-p8-deco-p10-enco.yaml  # í¬íŠ¸ 8â†’10 ìŠ¤íŠ¸ë¦¼
â”‚   â”œâ”€â”€ ipatch-p8-deco-p11-enco.yaml  # í¬íŠ¸ 8â†’11 ìŠ¤íŠ¸ë¦¼
â”‚   â””â”€â”€ ipatch-p9-deco-p11-enco.yaml  # í¬íŠ¸ 9â†’11 ìŠ¤íŠ¸ë¦¼
â”‚
â”œâ”€â”€ ğŸ“œ ìŠ¤í¬ë¦½íŠ¸
â”‚   â”œâ”€â”€ receiver_pc1_test.sh    # ìˆ˜ì‹  PC ì„¤ì • ìŠ¤í¬ë¦½íŠ¸
â”‚   â”œâ”€â”€ sender_video.sh         # ì˜ìƒ ì „ì†¡ ìŠ¤í¬ë¦½íŠ¸
â”‚   â””â”€â”€ measure_performance.sh  # ì„±ëŠ¥ ì¸¡ì • ìë™í™”
â”‚
â”œâ”€â”€ ğŸ“Š ì‹¤í—˜ ë°ì´í„°
â”‚   â”œâ”€â”€ results/
â”‚   â”‚   â”œâ”€â”€ throughput.csv
â”‚   â”‚   â”œâ”€â”€ latency.csv
â”‚   â”‚   â””â”€â”€ frame_loss.csv
â”‚   â””â”€â”€ captures/
â”‚       â””â”€â”€ *.pcap files
â”‚
â””â”€â”€ ğŸ“š ì°¸ê³  ìë£Œ
    â””â”€â”€ EVB-LAN9692-LM-User-Guide.pdf
```

---

## ğŸ”¬ í–¥í›„ ì—°êµ¬

### ë‹¨ê¸° ê³„íš (3-6ê°œì›”)

1. **ë‹¤ì¤‘ ìŠ¤ìœ„ì¹˜ í™˜ê²½**
   - Daisy-chain ë° Ring í† í´ë¡œì§€
   - ëˆ„ì  ì§€ì—° ë¶„ì„
   - ê²½ë¡œ ë‹¤ì¤‘í™” (IEEE 802.1CB FRER)

2. **ë™ì  íŠ¸ë˜í”½ íŒ¨í„´**
   - ì‹¤ì œ ì°¨ëŸ‰ ì£¼í–‰ ë°ì´í„° ê¸°ë°˜ ì‹œë®¬ë ˆì´ì…˜
   - ë²„ìŠ¤íŠ¸ íŠ¸ë˜í”½ ì²˜ë¦¬
   - ì ì‘í˜• íŒŒë¼ë¯¸í„° ì¡°ì •

3. **TASì™€ CBS ì¡°í•©**
   - Gate Control List ìµœì í™”
   - í•˜ì´ë¸Œë¦¬ë“œ ìŠ¤ì¼€ì¤„ë§
   - ì§€ì—° ê²½ê³„ ë¶„ì„

### ì¤‘ì¥ê¸° ê³„íš (6-12ê°œì›”)

1. **AI ê¸°ë°˜ ìµœì í™”**
   - ê°•í™”í•™ìŠµ ê¸°ë°˜ íŒŒë¼ë¯¸í„° ìë™ íŠœë‹
   - íŠ¸ë˜í”½ ì˜ˆì¸¡ ëª¨ë¸
   - ì´ìƒ íƒì§€ ì‹œìŠ¤í…œ

2. **ë³´ì•ˆ ê°•í™”**
   - MACsec í†µí•©
   - ì¹¨ì… íƒì§€ ì‹œìŠ¤í…œ
   - ì•ˆì „ ì¸ì¦ íšë“

3. **í‘œì¤€í™” ê¸°ì—¬**
   - IEEE 802.1 ì‘ì—… ê·¸ë£¹ ì°¸ì—¬
   - ì°¨ëŸ‰ìš© TSN í”„ë¡œíŒŒì¼ ì •ì˜
   - í…ŒìŠ¤íŠ¸ ë²¤ì¹˜ë§ˆí¬ ê°œë°œ

---

## ğŸ‘¥ ì—°êµ¬íŒ€

**TSNíŒ€, ì°¨ëŸ‰ì „ìì—°êµ¬ë¶€**

- Research Team A - CBS êµ¬í˜„ ë° ì‹¤í—˜
- Research Team B - ë„¤íŠ¸ì›Œí¬ ì„¤ì • ë° ë¶„ì„  
- Research Team C - ì˜ìƒ ìŠ¤íŠ¸ë¦¼ ì²˜ë¦¬
- Research Team D - í”„ë¡œì íŠ¸ ì´ê´„

---

## ğŸ“š ì°¸ê³ ë¬¸í—Œ

### í•µì‹¬ í‘œì¤€
1. IEEE 802.1Qav - Credit-Based Shaper
2. IEEE 802.1Qbv - Time-Aware Shaper
3. IEEE 802.1AS - Timing and Synchronization

### ì£¼ìš” ë…¼ë¬¸
1. Kehrer et al., "Fault-tolerance concepts for IEEE 802.1 TSN" (2014)
2. Imtiaz et al., "Performance study of Ethernet AVB" (2009)
3. Park et al., "FPGA-based TSN Switch Implementation" (2022)

### ê¸°ìˆ  ë¬¸ì„œ
1. Microchip LAN9692 Datasheet
2. VelocityDRIVE-SP User Guide
3. YANG RFC 7950

---

## ğŸ“ ë¼ì´ì„ ìŠ¤

ì´ í”„ë¡œì íŠ¸ëŠ” ì—°êµ¬ ëª©ì ìœ¼ë¡œ ê³µê°œë˜ì—ˆìŠµë‹ˆë‹¤.
ìƒì—…ì  ì‚¬ìš© ì‹œ ì—°êµ¬íŒ€ì— ë¬¸ì˜ ë°”ëë‹ˆë‹¤.

---

## ğŸ¤ ê¸°ì—¬ ë°©ë²•

1. Fork the repository
2. Create your feature branch (`git checkout -b feature/AmazingFeature`)
3. Commit your changes (`git commit -m 'Add some AmazingFeature'`)
4. Push to the branch (`git push origin feature/AmazingFeature`)
5. Open a Pull Request

---

## ğŸ“§ ì—°ë½ì²˜

- Email: tsn-team@keti.re.kr
- GitHub: https://github.com/hwkim3330/research_paper
- Issues: https://github.com/hwkim3330/research_paper/issues

---

<div align="center">

**ğŸ† ì„±ê³¼ ìš”ì•½ ğŸ†**

| ì§€í‘œ | ê°œì„ ìœ¨ | ì˜ë¯¸ |
|------|--------|------|
| **í”„ë ˆì„ ì†ì‹¤** | 96.9% â¬‡ï¸ | ëŠê¹€ ì—†ëŠ” ì˜ìƒ |
| **ì§€í„°** | 92.7% â¬‡ï¸ | ì•ˆì •ì  ì¬ìƒ |
| **ì§€ì—°** | 87.9% â¬‡ï¸ | ì‹¤ì‹œê°„ ë°˜ì‘ |
| **ëŒ€ì—­í­ ë³´ì¥** | 78% â¬†ï¸ | QoS í™•ë³´ |

*"CBSëŠ” ì°¨ì„¸ëŒ€ ìë™ì°¨ ë„¤íŠ¸ì›Œí¬ì˜ í•µì‹¬ ê¸°ìˆ ì…ë‹ˆë‹¤"*

</div>